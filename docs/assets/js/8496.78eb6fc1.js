"use strict";(self.webpackChunkmy_book=self.webpackChunkmy_book||[]).push([[8496],{8496:(e,r,o)=>{o.r(r),o.d(r,{default:()=>n});var t=o(6540),i=o(6347),a=o(4848);function n(){const e=(0,i.zy)(),[r,o]=(0,t.useState)(""),[n,s]=(0,t.useState)({}),[l,c]=(0,t.useState)(!1),[d,p]=(0,t.useState)(null),m=`notes_${e.pathname}`;(0,t.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("chapterNotes")||"{}");s(e),o(e[m]||"")},[m]);const f=Object.values(n).filter(e=>e.trim()).length;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>c(!l),style:{position:"fixed",bottom:"80px",right:"20px",width:"60px",height:"60px",borderRadius:"50%",background:"var(--ifm-color-primary)",color:"white",border:"none",fontSize:"1.5rem",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.2s",transform:l?"rotate(45deg)":"none"},title:"Note personali",children:l?"\u2715":"\ud83d\udcdd"}),l&&(0,a.jsxs)("div",{style:{position:"fixed",bottom:"150px",right:"20px",width:"350px",maxHeight:"500px",background:"var(--ifm-background-surface-color)",border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:99,display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,a.jsxs)("div",{style:{padding:"1rem",borderBottom:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-color-emphasis-100)"},children:[(0,a.jsx)("h3",{style:{margin:0,fontSize:"1.1rem"},children:"\ud83d\udcdd Note Personali"}),(0,a.jsxs)("div",{style:{fontSize:"0.85rem",color:"var(--ifm-color-emphasis-600)",marginTop:"0.25rem"},children:[e.pathname," \u2022 ",f," note totali"]})]}),(0,a.jsxs)("div",{style:{flex:1,padding:"1rem"},children:[(0,a.jsx)("textarea",{value:r,onChange:e=>o(e.target.value),placeholder:"Scrivi qui le tue note, riflessioni, citazioni preferite...",style:{width:"100%",height:"250px",padding:"0.75rem",border:"1px solid var(--ifm-color-emphasis-200)",borderRadius:"4px",fontFamily:"inherit",fontSize:"0.95rem",resize:"vertical",background:"var(--ifm-background-color)",color:"var(--ifm-font-color-base)"}}),d&&(0,a.jsxs)("div",{style:{marginTop:"0.5rem",fontSize:"0.85rem",color:"var(--ifm-color-success)"},children:["\u2713 Salvato alle ",d.toLocaleTimeString()]})]}),(0,a.jsxs)("div",{style:{padding:"1rem",borderTop:"1px solid var(--ifm-color-emphasis-200)",display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[(0,a.jsx)("button",{onClick:()=>{const e=JSON.parse(localStorage.getItem("chapterNotes")||"{}");e[m]=r,localStorage.setItem("chapterNotes",JSON.stringify(e)),s(e),p(new Date),setTimeout(()=>p(null),3e3)},style:{flex:1,padding:"0.5rem",background:"var(--ifm-color-primary)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"\ud83d\udcbe Salva"}),(0,a.jsx)("button",{onClick:()=>{const e=JSON.stringify(n,null,2),r="data:application/json;charset=utf-8,"+encodeURIComponent(e),o=`note-libro-${(new Date).toISOString().split("T")[0]}.json`,t=document.createElement("a");t.setAttribute("href",r),t.setAttribute("download",o),t.click()},style:{padding:"0.5rem 1rem",background:"var(--ifm-color-emphasis-200)",color:"var(--ifm-font-color-base)",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},title:"Esporta tutte le note",children:"\ud83d\udce4"}),(0,a.jsxs)("label",{style:{padding:"0.5rem 1rem",background:"var(--ifm-color-emphasis-200)",color:"var(--ifm-font-color-base)",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:["\ud83d\udce5",(0,a.jsx)("input",{type:"file",accept:".json",onChange:e=>{const r=e.target.files[0];if(!r)return;const t=new FileReader;t.onload=e=>{try{const r=JSON.parse(e.target.result);confirm("Questo sovrascriver\xe0 tutte le tue note attuali. Continuare?")&&(localStorage.setItem("chapterNotes",JSON.stringify(r)),s(r),o(r[m]||""),alert("Note importate con successo!"))}catch(r){alert("Errore nell'importazione del file")}},t.readAsText(r)},style:{display:"none"}})]})]})]})]})}}}]);