"use strict";(self.webpackChunkmy_book=self.webpackChunkmy_book||[]).push([[523],{5523:(e,r,t)=>{t.r(r),t.d(r,{default:()=>i});var n=t(6540),o=t(4848);function i(){const[e,r]=(0,n.useState)(!1),[t,i]=(0,n.useState)(!1),[s,a]=(0,n.useState)(null),[l,c]=(0,n.useState)([]),[d,m]=(0,n.useState)(1),[u,p]=(0,n.useState)(1),[h,x]=(0,n.useState)(!1),[g,f]=(0,n.useState)(""),b=(0,n.useRef)(null);(0,n.useEffect)(()=>{const e=()=>{const e=window.speechSynthesis.getVoices(),r=e.filter(e=>e.lang.startsWith("it")||e.lang.startsWith("en"));c(r.length>0?r:e);const t=r.find(e=>e.lang.startsWith("it"))||r[0];a(t)};return e(),window.speechSynthesis.onvoiceschanged=e,()=>{window.speechSynthesis.cancel()}},[]);const y=()=>{const e=(()=>{const e=document.querySelector("article");if(!e)return"";const r=e.cloneNode(!0);return r.querySelectorAll("pre, code, .tabs, button, .theme-admonition, nav, .margin-note").forEach(e=>e.remove()),r.textContent||r.innerText||""})();if(!e||!s)return;window.speechSynthesis.cancel();const t=new SpeechSynthesisUtterance(e);t.voice=s,t.rate=d,t.pitch=u,t.lang=s.lang,t.onstart=()=>{r(!0),i(!1)},t.onend=()=>{r(!1),i(!1),f("")},t.onerror=e=>{console.error("Errore sintesi vocale:",e),r(!1),i(!1)},t.onboundary=r=>{if("word"===r.name){const t=e.substr(r.charIndex,r.charLength);f(t)}},b.current=t,window.speechSynthesis.speak(t)},v=()=>{window.speechSynthesis.cancel(),r(!1),i(!1),f("")};return(0,n.useEffect)(()=>{const r=r=>{r.altKey&&"r"===r.key&&(r.preventDefault(),e?v():y())};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>{e||h?e&&v():x(!0)},style:{position:"fixed",bottom:"20px",right:"20px",width:"60px",height:"60px",borderRadius:"50%",background:e?"var(--ifm-color-danger)":"var(--ifm-color-primary)",color:"white",border:"none",fontSize:"1.5rem",cursor:"pointer",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s"},title:e?"Ferma lettura":"Avvia lettura audio (Alt+R)",children:e?"\u23f9":"\ud83d\udd0a"}),h&&(0,o.jsxs)("div",{style:{position:"fixed",bottom:"90px",right:"20px",width:"320px",background:"var(--ifm-background-surface-color)",border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:"8px",padding:"1.5rem",boxShadow:"0 8px 24px rgba(0,0,0,0.15)",zIndex:99},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[(0,o.jsx)("h3",{style:{margin:0,fontSize:"1.1rem"},children:"\ud83d\udd0a Lettura Audio"}),(0,o.jsx)("button",{onClick:()=>x(!1),style:{background:"none",border:"none",fontSize:"1.2rem",cursor:"pointer",color:"var(--ifm-color-emphasis-600)"},children:"\u2715"})]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem"},children:"Voce:"}),(0,o.jsx)("select",{value:s?.name||"",onChange:e=>{const r=l.find(r=>r.name===e.target.value);a(r)},style:{width:"100%",padding:"0.5rem",borderRadius:"4px",border:"1px solid var(--ifm-color-emphasis-200)",background:"var(--ifm-background-color)",color:"var(--ifm-font-color-base)"},children:l.map(e=>(0,o.jsxs)("option",{value:e.name,children:[e.name," (",e.lang,")"]},e.name))})]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem"},children:["Velocit\xe0: ",d,"x"]}),(0,o.jsx)("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:d,onChange:e=>m(parseFloat(e.target.value)),style:{width:"100%"}})]}),(0,o.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,o.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.9rem"},children:["Tono: ",u]}),(0,o.jsx)("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:u,onChange:e=>p(parseFloat(e.target.value)),style:{width:"100%"}})]}),(0,o.jsx)("div",{style:{display:"flex",gap:"0.5rem"},children:e?(0,o.jsxs)(o.Fragment,{children:[t?(0,o.jsx)("button",{onClick:()=>{window.speechSynthesis.resume(),i(!1)},style:{flex:1,padding:"0.75rem",background:"var(--ifm-color-success)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"\u25b6\ufe0f Riprendi"}):(0,o.jsx)("button",{onClick:()=>{window.speechSynthesis.pause(),i(!0)},style:{flex:1,padding:"0.75rem",background:"var(--ifm-color-warning)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"\u23f8 Pausa"}),(0,o.jsx)("button",{onClick:v,style:{flex:1,padding:"0.75rem",background:"var(--ifm-color-danger)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"\u23f9 Stop"})]}):(0,o.jsx)("button",{onClick:y,style:{flex:1,padding:"0.75rem",background:"var(--ifm-color-primary)",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:"\u25b6\ufe0f Avvia Lettura"})}),g&&(0,o.jsxs)("div",{style:{marginTop:"1rem",padding:"0.5rem",background:"var(--ifm-color-emphasis-100)",borderRadius:"4px",fontSize:"0.85rem",textAlign:"center",color:"var(--ifm-color-primary)"},children:["\ud83d\udde3 ",g]}),(0,o.jsx)("div",{style:{marginTop:"1rem",fontSize:"0.75rem",color:"var(--ifm-color-emphasis-600)",textAlign:"center"},children:"Scorciatoia: Alt + R"})]})]})}}}]);